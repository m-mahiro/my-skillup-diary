

### 2\. ファイアウォールを操作するコマンド（ポートを開く・閉じる）

Ubuntu標準のファイアウォール `ufw` を使って、外部からのポートへのアクセスを制御します。

#### `ufw` (Uncomplicated Firewall)

名前の通り、複雑な `iptables` を簡単に操作するためのフロントエンドツールです。

  - **状態確認:**
    ```bash
    # ufwの状態と、現在設定されているルールを確認
    sudo ufw status
    # 番号付きでルールを表示（削除時に便利）
    sudo ufw status numbered
    ```
  - **有効化 / 無効化:**
    ```bash
    # ufwを有効化（これを行うと、許可ルール以外はすべて拒否されます）
    sudo ufw enable

    # ufwを無効化（非推奨）
    sudo ufw disable
    ```
  - **ポートを開く（許可）:**
    ```bash
    # 80番ポート（TCP）を許可
    sudo ufw allow 80/tcp

    # サービス名でも指定可能
    sudo ufw allow ssh  # (22/tcp が許可される)
    ```
  - **ポートを閉じる（拒否）:**
    ```bash
    # 3306番ポート（TCP）を拒否（明示的に拒否する場合）
    sudo ufw deny 3306/tcp
    ```
  - **ルールの削除:**
    ```bash
    # 80/tcp の許可ルールを削除
    sudo ufw delete allow 80/tcp
    ```
